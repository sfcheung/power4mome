<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick Template: Parallel Mediation with Latent Variables • power4mome</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Hind-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Oxygen_Mono-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quick Template: Parallel Mediation with Latent Variables">
<meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">power4mome</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.25</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/power4mome.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Scenarios</h6></li>
    <li><a class="dropdown-item" href="../articles/power4test_latent_mediation.html">Power Analysis for Latent Variable Mediation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Given Power, Find x</h6></li>
    <li><a class="dropdown-item" href="../articles/x_from_power_for_n.html">Sample Size Given Desired Power</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Common Mediation Models</h6></li>
    <li><a class="dropdown-item" href="../articles/template_q_med_obs_simple.html">Quick Function: Simple Mediation with Observed Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_q_med_obs_serial.html">Quick Function: Serial Mediation with Observed Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_q_med_obs_parallel.html">Quick Function: Parallel Mediation with Observed Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_q_med_lav_simple.html">Quick Function: Simple Mediation with Latent Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_q_med_lav_serial.html">Quick Function: Serial Mediation with Latent Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_q_med_lav_parallel.html">Quick Function: Parallel Mediation with Latent Variables</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Templates (Code Examples)</h6></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_mediation_obs_simple.html">Quick Template: Simple Mediation with Observed Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_mediation_obs_serial.html">Quick Template: Serial Mediation with Observed Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_mediation_obs_parallel.html">Quick Template: Parallel Mediation with Observed Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_mediation_lav_simple.html">Quick Template: Simple Mediation with Latent Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_mediation_lav_serial.html">Quick Template: Serial Mediation with Latent Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_mediation_lav_parallel.html">Quick Template: Parallel Mediation with Latent Variables</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Moderation Templates (Code Examples)</h6></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_moderation_obs_simple.html">Quick Template: Simple Moderation with Observed Variables</a></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_moderation_obs_two_ws.html">Quick Template: Moderation with Observed Variables: Two Moderators</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Moderated Mediation Templates (Code Examples)</h6></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_mome_obs_a.html">Quick Template: Simple Moderated Mediation with Observed Variables: a-Path Moderated</a></li>
    <li><a class="dropdown-item" href="../articles/template_n_from_power_mome_obs_b.html">Quick Template: Simple Moderated Mediation with Observed Variables: b-Path Moderated</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sfcheung/power4mome/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="template_n_from_power_mediation_lav_parallel_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="template_n_from_power_mediation_lav_parallel_files/d3-3.3.8/d3.min.js"></script><script src="template_n_from_power_mediation_lav_parallel_files/dagre-0.4.0/dagre-d3.min.js"></script><link href="template_n_from_power_mediation_lav_parallel_files/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet">
<script src="template_n_from_power_mediation_lav_parallel_files/mermaid-0.3.0/dist/mermaid.slim.min.js"></script><link href="template_n_from_power_mediation_lav_parallel_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="template_n_from_power_mediation_lav_parallel_files/chromatography-0.1/chromatography.js"></script><script src="template_n_from_power_mediation_lav_parallel_files/DiagrammeR-binding-1.0.11/DiagrammeR.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Quick Template: Parallel Mediation with Latent Variables</h1>
            
            <h4 data-toc-skip class="date">2025-10-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/power4mome/blob/main/vignettes/articles/template_n_from_power_mediation_lav_parallel.Rmd" class="external-link"><code>vignettes/articles/template_n_from_power_mediation_lav_parallel.Rmd</code></a></small>
      <div class="d-none name"><code>template_n_from_power_mediation_lav_parallel.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This and other “Quick Template” articles are examples of R code to
determine the range of sample sizes for a target level of power in
typical models using <a href="https://sfcheung.github.io/power4mome/">power4mome</a>. Users can
quickly adapt them for their scenarios. A summary of the code examples
can be found in the section <a href="#code_template">Code Template</a>
at the end of this document.</p>
</div>
<div class="section level2">
<h2 id="prerequisite">Prerequisite<a class="anchor" aria-label="anchor" href="#prerequisite"></a>
</h2>
<p>Basic knowledge about fitting models by <code>lavaan</code> and
<code>power4mome</code> is required.</p>
<p>This file is not intended to be an introduction on how to use
functions in <code>power4mome</code>. For details on how to use
<code><a href="../reference/power4test.html">power4test()</a></code>, refer to the <a href="https://sfcheung.github.io/power4mome/articles/power4mome.html">Get-Started
article</a>. Please also refer to the help page of
<code><a href="../reference/x_from_power.html">n_region_from_power()</a></code>, and the <a href="https://sfcheung.github.io/power4mome/articles/x_from_power_for_n.html">article</a>
on <code><a href="../reference/x_from_power.html">n_from_power()</a></code>, which is called twice by
<code><a href="../reference/x_from_power.html">n_region_from_power()</a></code> to find the regions described
below.</p>
</div>
<div class="section level2">
<h2 id="scope">Scope<a class="anchor" aria-label="anchor" href="#scope"></a>
</h2>
<p>This file is for parallel mediation models with latent variables.</p>
</div>
<div class="section level2">
<h2 id="functions-used-in-this-template">Functions Used in This Template<a class="anchor" aria-label="anchor" href="#functions-used-in-this-template"></a>
</h2>
<ul>
<li>
<p><code><a href="../reference/power4test.html">power4test()</a></code></p>
<ul>
<li>Set up the model and the population values, generate the data, and
generate the Monte Carlo simulated estimates for Monte Carlo confidence
interval.</li>
</ul>
</li>
<li>
<p><code><a href="../reference/x_from_power.html">n_region_from_power()</a></code></p>
<ul>
<li>Find the regions of sample sizes based on the target power.</li>
</ul>
</li>
<li>
<p><code><a href="../reference/test_k_indirect_effects.html">test_k_indirect_effects()</a></code></p>
<ul>
<li>Test several indirect effects as one test, using Monte Carlo or
bootstrap confidence intervals. Used by <code><a href="../reference/power4test.html">power4test()</a></code>.</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="common-flow">Common Flow<a class="anchor" aria-label="anchor" href="#common-flow"></a>
</h2>
<p>The following chart summarizes the steps covered below.</p>
<div class="figure" style="text-align: center">
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:500px;height:550px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"diagram":"\nflowchart TD\n\n  classDef default fill:lightblue;\n  classDef default2 fill:lightgreen;\n\n  style tryn fill: lightyellow\n  style model fill: lightyellow\n\n  SetModel(\"Set Up the Population Model (<i>model<\/i>)\")\n  SetES(\"Set the Population Values (<i>pop_es<\/i>)\")\n  OneN(\"Check the Setup<br/><i>power4test()<\/i>\")\n  %% SeveralN(\"Try several ns<br/><i>power4test_by_n()<\/i>\")\n  SearchN(\"Search the regions of ns<br/><i>n_region_from_power()<\/i>\")\n  %% AnotherN(\"Try another n<br/><i>power4test()<\/i>\")\n\n  subgraph model [\"Set Up the Model and Test\"]\n\n  SetModel:::default2 --> SetES:::default2\n  SetES --> OneN\n\n  end\n\n  %% OneN -.-> SetES\n\n  subgraph tryn [\"The Region of Sample Sizes\"]\n\n  OneN --> SearchN\n  SearchN -->|Try Other<br/>Population Values| SetES\n\n  %% OneN <==> AnotherN\n  %% AnotherN <==> SeveralN\n  %% AnotherN <==> SearchN\n  %% OneN <==> SeveralN\n  %% OneN <==> SearchN\n  %% SeveralN <==> SearchN\n\n  end\n\n  %% AnotherN -.-> SetES\n  %% SeveralN -.-> SetES\n  %% SearchN -.-> SetES\n"},"evals":[],"jsHooks":[]}</script><p class="caption">
Common Workflow
</p>
</div>
<p>In practice, steps can be repeated, and population values changed,
until the desired goal is achieved (e.g., the region of sample sizes
with power close to the target power is found).</p>
</div>
<div class="section level2">
<h2 id="set-up-the-model-and-test">Set Up The Model and Test<a class="anchor" aria-label="anchor" href="#set-up-the-model-and-test"></a>
</h2>
<p>Load the package first:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sfcheung.github.io/power4mome/">power4mome</a></span><span class="op">)</span></span></code></pre></div>
<p>Estimate the power for a sample size.</p>
<p>A parallel mediation model has several parallel paths (three in the
following example). The test function
<code><a href="../reference/test_k_indirect_effects.html">test_k_indirect_effects()</a></code> can be used to estimate the power
for having all selected indirect paths significant if
<code>omnibus</code> is set to <code>"all_sig"</code>.</p>
<p>The code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ====== Model: Form ======</span></span>
<span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span></span>
<span><span class="st">"</span></span>
<span><span class="st">m1 ~ x</span></span>
<span><span class="st">m2 ~ x</span></span>
<span><span class="st">y ~ m1 + m2 + x</span></span>
<span><span class="st">"</span></span>
<span></span>
<span><span class="co"># ====== Model: Population Values ======</span></span>
<span><span class="co"># l: large (.50 by default)</span></span>
<span><span class="co"># m: medium (.30 by default)</span></span>
<span><span class="co"># s: small (.10 by default)</span></span>
<span><span class="co"># n: nil (.00 by default)</span></span>
<span><span class="co"># -l, -m, and -s denote negative values</span></span>
<span><span class="co"># Omitted paths are zero by default</span></span>
<span><span class="co"># Can also set to a number directly</span></span>
<span><span class="co"># Set each path to the hypothesized magnitude</span></span>
<span></span>
<span><span class="va">model_es</span> <span class="op">&lt;-</span></span>
<span><span class="st">"</span></span>
<span><span class="st">m1 ~ x: m</span></span>
<span><span class="st">m2 ~ x: m</span></span>
<span><span class="st">y ~ m1: l</span></span>
<span><span class="st">y ~ m2: l</span></span>
<span><span class="st">y ~ x: s</span></span>
<span><span class="st">"</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="template_n_from_power_mediation_lav_parallel_model-1.png" alt="The Model"><p class="caption">
The Model
</p>
</div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># ====== Test the Model Specification ======</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/power4test.html">power4test</a></span><span class="op">(</span>nrep <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                  model <span class="op">=</span> <span class="va">model</span>,</span>
<span>                  pop_es <span class="op">=</span> <span class="va">model_es</span>,</span>
<span>                  n <span class="op">=</span> <span class="fl">50000</span>,</span>
<span>                  iseed <span class="op">=</span> <span class="fl">1234</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ====== Check the Data Generated ======</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">out</span>,</span>
<span>      data_long <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ====== Estimate the Power ======</span></span>
<span></span>
<span><span class="co"># For n = 150,</span></span>
<span><span class="co"># when testing all indirect effects by</span></span>
<span><span class="co"># Monte Carlo confidence intervals</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/power4test.html">power4test</a></span><span class="op">(</span>nrep <span class="op">=</span> <span class="fl">400</span>,</span>
<span>                  model <span class="op">=</span> <span class="va">model</span>,</span>
<span>                  pop_es <span class="op">=</span> <span class="va">model_es</span>,</span>
<span>                  n <span class="op">=</span> <span class="fl">150</span>,</span>
<span>                  R <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>                  number_of_indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                           m1 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                                           m2 <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                           y <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>                  reliability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">.80</span>,</span>
<span>                                  m1 <span class="op">=</span> <span class="fl">.70</span>,</span>
<span>                                  m2 <span class="op">=</span> <span class="fl">.70</span>,</span>
<span>                                  y <span class="op">=</span> <span class="fl">.80</span><span class="op">)</span>,</span>
<span>                  ci_type <span class="op">=</span> <span class="st">"mc"</span>,</span>
<span>                  test_fun <span class="op">=</span> <span class="va">test_k_indirect_effects</span>,</span>
<span>                  test_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>                                   y <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>                                   mc_ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                   omnibus <span class="op">=</span> <span class="st">"all_sig"</span><span class="op">)</span>,</span>
<span>                  iseed <span class="op">=</span> <span class="fl">1234</span>,</span>
<span>                  parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ====== Compute the Rejection Rate ======</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rejection_rates.html">rejection_rates</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></code></pre></div>
<p>The results:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">out</span>,</span>
<span>      data_long <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ====================== Model Information ======================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; == Model on Factors/Variables ==</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; m1 ~ x</span></span>
<span><span class="co">#&gt; m2 ~ x</span></span>
<span><span class="co">#&gt; y ~ m1 + m2 + x</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; == Model on Variables/Indicators ==</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; m1 ~ x</span></span>
<span><span class="co">#&gt; m2 ~ x</span></span>
<span><span class="co">#&gt; y ~ m1 + m2 + x</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; x =~ x1 + x2 + x3</span></span>
<span><span class="co">#&gt; m1 =~ m11 + m12 + m13 + m14</span></span>
<span><span class="co">#&gt; m2 =~ m21 + m22 + m23</span></span>
<span><span class="co">#&gt; y =~ y1 + y2 + y3</span></span>
<span><span class="co">#&gt; ====== Population Values ======</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;                    Population</span></span>
<span><span class="co">#&gt;   m1 ~                       </span></span>
<span><span class="co">#&gt;     x                 0.300  </span></span>
<span><span class="co">#&gt;   m2 ~                       </span></span>
<span><span class="co">#&gt;     x                 0.300  </span></span>
<span><span class="co">#&gt;   y ~                        </span></span>
<span><span class="co">#&gt;     m1                0.500  </span></span>
<span><span class="co">#&gt;     m2                0.500  </span></span>
<span><span class="co">#&gt;     x                 0.100  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variances:</span></span>
<span><span class="co">#&gt;                    Population</span></span>
<span><span class="co">#&gt;    .m1                0.910  </span></span>
<span><span class="co">#&gt;    .m2                0.910  </span></span>
<span><span class="co">#&gt;    .y                 0.385  </span></span>
<span><span class="co">#&gt;     x                 1.000  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Computing indirect effects for 3 paths ...)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; == Population Conditional/Indirect Effect(s) ==</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; == Indirect Effect(s) ==</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                ind</span></span>
<span><span class="co">#&gt; x -&gt; m1 -&gt; y 0.150</span></span>
<span><span class="co">#&gt; x -&gt; m2 -&gt; y 0.150</span></span>
<span><span class="co">#&gt; x -&gt; y       0.100</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  - The 'ind' column shows the indirect effect(s).</span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt; ==== Population Reliability ====</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    x  m1  m2   y</span></span>
<span><span class="co">#&gt;  0.8 0.7 0.7 0.8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; == Population Standardized Loadings ==</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      x    m1    m2     y</span></span>
<span><span class="co">#&gt;  0.756 0.607 0.661 0.756</span></span>
<span><span class="co">#&gt; ======================= Data Information =======================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Replications:  400 </span></span>
<span><span class="co">#&gt; Sample Sizes:  150 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ==== Descriptive Statistics ====</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     vars     n  mean   sd  skew kurtosis se</span></span>
<span><span class="co">#&gt; x1     1 60000  0.00 1.00 -0.01    -0.03  0</span></span>
<span><span class="co">#&gt; x2     2 60000  0.00 1.00  0.00     0.02  0</span></span>
<span><span class="co">#&gt; x3     3 60000  0.00 1.00  0.00    -0.01  0</span></span>
<span><span class="co">#&gt; m11    4 60000  0.00 1.00  0.01    -0.01  0</span></span>
<span><span class="co">#&gt; m12    5 60000  0.00 1.00  0.00    -0.02  0</span></span>
<span><span class="co">#&gt; m13    6 60000  0.00 1.00 -0.01    -0.01  0</span></span>
<span><span class="co">#&gt; m14    7 60000 -0.01 1.00  0.00     0.00  0</span></span>
<span><span class="co">#&gt; m21    8 60000  0.00 1.00  0.00    -0.02  0</span></span>
<span><span class="co">#&gt; m22    9 60000  0.00 1.00 -0.01    -0.01  0</span></span>
<span><span class="co">#&gt; m23   10 60000 -0.01 0.99 -0.02     0.03  0</span></span>
<span><span class="co">#&gt; y1    11 60000  0.00 1.00  0.00     0.00  0</span></span>
<span><span class="co">#&gt; y2    12 60000  0.00 1.00  0.01     0.03  0</span></span>
<span><span class="co">#&gt; y3    13 60000  0.00 1.00  0.00     0.02  0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ==== Parameter Estimates Based on All 400 Samples Combined ====</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Total Sample Size: 60000 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ==== Standardized Estimates ====</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variances and error variances omitted.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Latent Variables:</span></span>
<span><span class="co">#&gt;                     est.std</span></span>
<span><span class="co">#&gt;   x =~                     </span></span>
<span><span class="co">#&gt;     x1                0.754</span></span>
<span><span class="co">#&gt;     x2                0.752</span></span>
<span><span class="co">#&gt;     x3                0.760</span></span>
<span><span class="co">#&gt;   m1 =~                    </span></span>
<span><span class="co">#&gt;     m11               0.606</span></span>
<span><span class="co">#&gt;     m12               0.611</span></span>
<span><span class="co">#&gt;     m13               0.604</span></span>
<span><span class="co">#&gt;     m14               0.601</span></span>
<span><span class="co">#&gt;   m2 =~                    </span></span>
<span><span class="co">#&gt;     m21               0.662</span></span>
<span><span class="co">#&gt;     m22               0.663</span></span>
<span><span class="co">#&gt;     m23               0.661</span></span>
<span><span class="co">#&gt;   y =~                     </span></span>
<span><span class="co">#&gt;     y1                0.755</span></span>
<span><span class="co">#&gt;     y2                0.752</span></span>
<span><span class="co">#&gt;     y3                0.755</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;                     est.std</span></span>
<span><span class="co">#&gt;   m1 ~                     </span></span>
<span><span class="co">#&gt;     x                 0.302</span></span>
<span><span class="co">#&gt;   m2 ~                     </span></span>
<span><span class="co">#&gt;     x                 0.301</span></span>
<span><span class="co">#&gt;   y ~                      </span></span>
<span><span class="co">#&gt;     m1                0.507</span></span>
<span><span class="co">#&gt;     m2                0.488</span></span>
<span><span class="co">#&gt;     x                 0.104</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ==================== Extra Element(s) Found ====================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - fit</span></span>
<span><span class="co">#&gt; - mc_out</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Element(s) of the First Dataset ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ============ &lt;fit&gt; ============</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; lavaan 0.6-20 ended normally after 33 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Estimator                                         ML</span></span>
<span><span class="co">#&gt;   Optimization method                           NLMINB</span></span>
<span><span class="co">#&gt;   Number of model parameters                        31</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Number of observations                           150</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Test User Model:</span></span>
<span><span class="co">#&gt;                                                       </span></span>
<span><span class="co">#&gt;   Test statistic                                54.181</span></span>
<span><span class="co">#&gt;   Degrees of freedom                                60</span></span>
<span><span class="co">#&gt;   P-value (Chi-square)                           0.687</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; =========== &lt;mc_out&gt; ===========</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; == A 'mc_out' class object ==</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Monte Carlo replications: 1000 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ====================== Test(s) Conducted ======================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - test_indirects: x-...-&gt;y</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call print() and set 'test_long = TRUE' for a detailed report.</span></span>
<span><span class="fu"><a href="../reference/rejection_rates.html">rejection_rates</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span><span class="co">#&gt; [test]: test_indirects: x-...-&gt;y </span></span>
<span><span class="co">#&gt; [test_label]: x-...-&gt;y (All sig) </span></span>
<span><span class="co">#&gt;    est   p.v reject r.cilo r.cihi</span></span>
<span><span class="co">#&gt; 1  NaN 1.000  0.615  0.566  0.661</span></span>
<span><span class="co">#&gt; Notes:</span></span>
<span><span class="co">#&gt; - p.v: The proportion of valid replications.</span></span>
<span><span class="co">#&gt; - est: The mean of the estimates in a test across replications.</span></span>
<span><span class="co">#&gt; - reject: The proportion of 'significant' replications, that is, the</span></span>
<span><span class="co">#&gt;   rejection rate. If the null hypothesis is true, this is the Type I</span></span>
<span><span class="co">#&gt;   error rate. If the null hypothesis is false, this is the power.</span></span>
<span><span class="co">#&gt; - r.cilo,r.cihi: The confidence interval of the rejection rate, based</span></span>
<span><span class="co">#&gt;   on Wilson's (1927) method.</span></span>
<span><span class="co">#&gt; - Refer to the tests for the meanings of other columns.</span></span></code></pre></div>
<p>(<code>est</code> is <code>NaN</code> because the test is for all
three paths and so there is no single point estimate for the test.)</p>
</div>
<div class="section level2">
<h2 id="find-the-regions-of-n-based-on-the-target-power">Find the Regions of <em>N</em> Based on the Target Power<a class="anchor" aria-label="anchor" href="#find-the-regions-of-n-based-on-the-target-power"></a>
</h2>
<p>Search, by simulation, the following two regions of sample sizes:</p>
<ul>
<li><p>Sample sizes with estimated levels of power significantly below
the target level (e.g., .80), tested by the confidence interval (95% by
default).</p></li>
<li><p>Sample sizes with estimated levels of power significantly above
the target level (e.g., .80), tested by the confidence interval (95% by
default).</p></li>
</ul>
<p>In practice, we rarely need high precision for these regions for
sample size planning. Therefore, we only need to find the two sample
sizes with the corresponding confidence bounds <em>close</em>
<em>enough</em> to the target power, defined by a tolerance value. In
the function below, this value is .02 by default.</p>
<p>It can take some time to run if the estimated power of the sample
size is too different from the target power.</p>
<p>We can find the two regions by
<code><a href="../reference/x_from_power.html">n_region_from_power()</a></code>.</p>
<p>The code:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#</span></span>
<span><span class="co"># ===== Reuse the output of power4test() =====</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># Call n_region_from_power()</span></span>
<span><span class="co"># - Set target power: target_power = .80 (Default, can be omitted)</span></span>
<span><span class="co"># - Set the seed for the simulation: Integer. Should always be set.</span></span>
<span><span class="co"># To set desired precision:</span></span>
<span><span class="co"># - Set final number of R: final_R = 1000 (Default, can be omitted)</span></span>
<span><span class="co"># - Set final number of replications: final_nrep = 400 (Default, can be omitted)</span></span>
<span></span>
<span><span class="va">n_power_region</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/x_from_power.html">n_region_from_power</a></span><span class="op">(</span><span class="va">out</span>,</span>
<span>                                      seed <span class="op">=</span> <span class="fl">1357</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ===== Basic Results =====</span></span>
<span></span>
<span><span class="va">n_power_region</span></span>
<span></span>
<span><span class="co"># ===== Plot the (Crude) Power Curve and the Regions =====</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">n_power_region</span><span class="op">)</span></span></code></pre></div>
<p>The results:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ===== Basic Results =====</span></span>
<span></span>
<span><span class="va">n_power_region</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; n_region_from_power(object = out, seed = 1357)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                      Setting                                      </span></span>
<span><span class="co">#&gt; Predictor(x)         Sample Size                                  </span></span>
<span><span class="co">#&gt; Goal:                Power significantly below or above the target</span></span>
<span><span class="co">#&gt; algorithm:           bisection                                    </span></span>
<span><span class="co">#&gt; Level of confidence: 95.00%                                       </span></span>
<span><span class="co">#&gt; Target Power:        0.800                                        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Solution: </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Approximate region of sample sizes with power:</span></span>
<span><span class="co">#&gt; - not significantly different from 0.800: 190 to 217</span></span>
<span><span class="co">#&gt; - significantly lower than 0.800: 190</span></span>
<span><span class="co">#&gt; - significantly higher than 0.800: 217</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Confidence intervals of the estimated power:</span></span>
<span><span class="co">#&gt; - for the lower bound (190): [0.711, 0.795]</span></span>
<span><span class="co">#&gt; - for the upper bound (217): [0.787, 0.861]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call `summary()` for detailed results.</span></span>
<span></span>
<span><span class="co"># ===== Plot the (Crude) Power Curve and the Regions =====</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">n_power_region</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="template_n_from_power_mediation_lav_parallel_plot-1.png" alt="Power Curve"><p class="caption">
Power Curve
</p>
</div>
<p>As shown above, approximately:</p>
<ul>
<li><p>sample sizes lower than 190 have power significantly lower than
.80, and</p></li>
<li><p>sample sizes higher than 217 have power significantly higher than
.80.</p></li>
</ul>
<p>In other words, sample sizes between 190 and 217 have power not
significantly different from .80.</p>
<p>If necessary, detailed results can be printed by
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ===== Detailed Results =====</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">n_power_region</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ======&lt;&lt; Summary for the Lower Region &gt;&gt;======</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ====== x_from_power Results ======</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; power4mome::x_from_power(object = out, x = "n", what = "ub", </span></span>
<span><span class="co">#&gt;     goal = "close_enough", seed = 1357)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Predictor (x): Sample Size </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Target Power: 0.800 </span></span>
<span><span class="co">#&gt; - Goal: Find 'x' with estimated upper confidence bound close enough to</span></span>
<span><span class="co">#&gt;   the target power.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Major Results ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Final Value (Sample Size): 190</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Final Estimated Power: 0.755 </span></span>
<span><span class="co">#&gt; - Confidence Interval: [0.711; 0.795]</span></span>
<span><span class="co">#&gt; - Level of confidence: 95.0%</span></span>
<span><span class="co">#&gt; - Based on 400 replications.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Technical Information ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Algorithm: bisection </span></span>
<span><span class="co">#&gt; - Tolerance for 'close enough': Within 0.02000 of 0.800 </span></span>
<span><span class="co">#&gt; - The range of values explored: 150 to 195 </span></span>
<span><span class="co">#&gt; - Time spent in the search: 1.763 mins </span></span>
<span><span class="co">#&gt; - The final crude model for the power-predictor relation:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Type: Logistic Regression </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; power_curve(object = by_x_1, formula = power_model, start = power_curve_start, </span></span>
<span><span class="co">#&gt;     lower_bound = lower_bound, upper_bound = upper_bound, nls_args = nls_args, </span></span>
<span><span class="co">#&gt;     nls_control = nls_control, verbose = progress)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Predictor: n (Sample Size)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:  stats::glm(formula = reject ~ x, family = "binomial", data = reject1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt; (Intercept)            x  </span></span>
<span><span class="co">#&gt;    -2.33752      0.01816  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Degrees of Freedom: 1999 Total (i.e. Null);  1998 Residual</span></span>
<span><span class="co">#&gt; Null Deviance:       2416 </span></span>
<span><span class="co">#&gt; Residual Deviance: 2379  AIC: 2383</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Detailed Results:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [test]: test_indirects: x-...-&gt;y </span></span>
<span><span class="co">#&gt; [test_label]: x-...-&gt;y (All sig) </span></span>
<span><span class="co">#&gt;     n  est   p.v reject r.cilo r.cihi</span></span>
<span><span class="co">#&gt; 1 150  NaN 1.000  0.615  0.566  0.661</span></span>
<span><span class="co">#&gt; 2 173  NaN 1.000  0.647  0.599  0.693</span></span>
<span><span class="co">#&gt; 3 184  NaN 1.000  0.738  0.692  0.778</span></span>
<span><span class="co">#&gt; 4 190  NaN 1.000  0.755  0.711  0.795</span></span>
<span><span class="co">#&gt; 5 195  NaN 1.000  0.785  0.742  0.822</span></span>
<span><span class="co">#&gt; Notes:</span></span>
<span><span class="co">#&gt; - n: The sample size in a trial.</span></span>
<span><span class="co">#&gt; - p.v: The proportion of valid replications.</span></span>
<span><span class="co">#&gt; - est: The mean of the estimates in a test across replications.</span></span>
<span><span class="co">#&gt; - reject: The proportion of 'significant' replications, that is, the</span></span>
<span><span class="co">#&gt;   rejection rate. If the null hypothesis is true, this is the Type I</span></span>
<span><span class="co">#&gt;   error rate. If the null hypothesis is false, this is the power.</span></span>
<span><span class="co">#&gt; - r.cilo,r.cihi: The confidence interval of the rejection rate, based</span></span>
<span><span class="co">#&gt;   on Wilson's (1927) method.</span></span>
<span><span class="co">#&gt; - Refer to the tests for the meanings of other columns.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ======&lt;&lt; Summary for the Upper Region &gt;&gt;======</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ====== x_from_power Results ======</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; power4mome::x_from_power(object = out, seed = 1357, x = "n", </span></span>
<span><span class="co">#&gt;     what = "lb", goal = "close_enough")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Predictor (x): Sample Size </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Target Power: 0.800 </span></span>
<span><span class="co">#&gt; - Goal: Find 'x' with estimated lower confidence bound close enough to</span></span>
<span><span class="co">#&gt;   the target power.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Major Results ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Final Value (Sample Size): 217</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Final Estimated Power: 0.828 </span></span>
<span><span class="co">#&gt; - Confidence Interval: [0.787; 0.861]</span></span>
<span><span class="co">#&gt; - Level of confidence: 95.0%</span></span>
<span><span class="co">#&gt; - Based on 400 replications.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Technical Information ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Algorithm: bisection </span></span>
<span><span class="co">#&gt; - Tolerance for 'close enough': Within 0.02000 of 0.800 </span></span>
<span><span class="co">#&gt; - The range of values explored: 195 to 308 </span></span>
<span><span class="co">#&gt; - Time spent in the search: 3.495 mins </span></span>
<span><span class="co">#&gt; - The final crude model for the power-predictor relation:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Type: Logistic Regression </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; power_curve(object = by_x_1, formula = power_model, start = power_curve_start, </span></span>
<span><span class="co">#&gt;     lower_bound = lower_bound, upper_bound = upper_bound, nls_args = nls_args, </span></span>
<span><span class="co">#&gt;     nls_control = nls_control, verbose = progress)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Predictor: n (Sample Size)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:  stats::glm(formula = reject ~ x, family = "binomial", data = reject1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt; (Intercept)            x  </span></span>
<span><span class="co">#&gt;     -1.9154       0.0165  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Degrees of Freedom: 3199 Total (i.e. Null);  3198 Residual</span></span>
<span><span class="co">#&gt; Null Deviance:       2660 </span></span>
<span><span class="co">#&gt; Residual Deviance: 2577  AIC: 2581</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - Detailed Results:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [test]: test_indirects: x-...-&gt;y </span></span>
<span><span class="co">#&gt; [test_label]: x-...-&gt;y (All sig) </span></span>
<span><span class="co">#&gt;     n  est   p.v reject r.cilo r.cihi</span></span>
<span><span class="co">#&gt; 1 195  NaN 1.000  0.785  0.742  0.822</span></span>
<span><span class="co">#&gt; 2 199  NaN 1.000  0.807  0.766  0.843</span></span>
<span><span class="co">#&gt; 3 213  NaN 1.000  0.820  0.779  0.855</span></span>
<span><span class="co">#&gt; 4 217  NaN 1.000  0.828  0.787  0.861</span></span>
<span><span class="co">#&gt; 5 220  NaN 1.000  0.863  0.825  0.893</span></span>
<span><span class="co">#&gt; 6 227  NaN 1.000  0.877  0.842  0.906</span></span>
<span><span class="co">#&gt; 7 254  NaN 1.000  0.885  0.850  0.913</span></span>
<span><span class="co">#&gt; 8 308  NaN 1.000  0.968  0.945  0.981</span></span>
<span><span class="co">#&gt; Notes:</span></span>
<span><span class="co">#&gt; - n: The sample size in a trial.</span></span>
<span><span class="co">#&gt; - p.v: The proportion of valid replications.</span></span>
<span><span class="co">#&gt; - est: The mean of the estimates in a test across replications.</span></span>
<span><span class="co">#&gt; - reject: The proportion of 'significant' replications, that is, the</span></span>
<span><span class="co">#&gt;   rejection rate. If the null hypothesis is true, this is the Type I</span></span>
<span><span class="co">#&gt;   error rate. If the null hypothesis is false, this is the power.</span></span>
<span><span class="co">#&gt; - r.cilo,r.cihi: The confidence interval of the rejection rate, based</span></span>
<span><span class="co">#&gt;   on Wilson's (1927) method.</span></span>
<span><span class="co">#&gt; - Refer to the tests for the meanings of other columns.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="code_template">Code Template<a class="anchor" aria-label="anchor" href="#code_template"></a>
</h2>
<p>This is the code used above:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sfcheung.github.io/power4mome/">power4mome</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ====== Model and Effect Size (Population Values) ======</span></span>
<span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span></span>
<span><span class="st">"</span></span>
<span><span class="st">m1 ~ x</span></span>
<span><span class="st">m2 ~ x</span></span>
<span><span class="st">y ~ m1 + m2 + x</span></span>
<span><span class="st">"</span></span>
<span></span>
<span><span class="va">model_es</span> <span class="op">&lt;-</span></span>
<span><span class="st">"</span></span>
<span><span class="st">m1 ~ x: m</span></span>
<span><span class="st">m2 ~ x: m</span></span>
<span><span class="st">y ~ m1: l</span></span>
<span><span class="st">y ~ m2: l</span></span>
<span><span class="st">y ~ x: s</span></span>
<span><span class="st">"</span></span>
<span></span>
<span><span class="co"># Test the Model Specification</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/power4test.html">power4test</a></span><span class="op">(</span>nrep <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                  model <span class="op">=</span> <span class="va">model</span>,</span>
<span>                  pop_es <span class="op">=</span> <span class="va">model_es</span>,</span>
<span>                  n <span class="op">=</span> <span class="fl">50000</span>,</span>
<span>                  number_of_indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                           m1 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                                           m2 <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                           y <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>                  reliability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">.80</span>,</span>
<span>                                  m1 <span class="op">=</span> <span class="fl">.70</span>,</span>
<span>                                  m2 <span class="op">=</span> <span class="fl">.70</span>,</span>
<span>                                  y <span class="op">=</span> <span class="fl">.80</span><span class="op">)</span>,</span>
<span>                  iseed <span class="op">=</span> <span class="fl">1234</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the Data Generated</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">out</span>,</span>
<span>      data_long <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ====== Try One N and Estimate the Power ======</span></span>
<span></span>
<span><span class="co"># For n = 200,</span></span>
<span><span class="co"># when testing all indirect effects by</span></span>
<span><span class="co"># Monte Carlo confidence intervals</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/power4test.html">power4test</a></span><span class="op">(</span>nrep <span class="op">=</span> <span class="fl">400</span>,</span>
<span>                  model <span class="op">=</span> <span class="va">model</span>,</span>
<span>                  pop_es <span class="op">=</span> <span class="va">model_es</span>,</span>
<span>                  n <span class="op">=</span> <span class="fl">200</span>,</span>
<span>                  number_of_indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                           m1 <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                                           m2 <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                           y <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>                  reliability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">.80</span>,</span>
<span>                                  m1 <span class="op">=</span> <span class="fl">.70</span>,</span>
<span>                                  m2 <span class="op">=</span> <span class="fl">.70</span>,</span>
<span>                                  y <span class="op">=</span> <span class="fl">.80</span><span class="op">)</span>,</span>
<span>                  R <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>                  ci_type <span class="op">=</span> <span class="st">"mc"</span>,</span>
<span>                  test_fun <span class="op">=</span> <span class="va">test_k_indirect_effects</span>,</span>
<span>                  test_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>                                   y <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>                                   mc_ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                   omnibus <span class="op">=</span> <span class="st">"all_sig"</span><span class="op">)</span>,</span>
<span>                  iseed <span class="op">=</span> <span class="fl">1234</span>,</span>
<span>                  parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rejection_rates.html">rejection_rates</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ====== Regions of Ns ======</span></span>
<span></span>
<span><span class="co"># Call n_region_from_power()</span></span>
<span><span class="co"># - Set target power: target_power = .80 (Default, can be omitted)</span></span>
<span><span class="co"># - Set the seed for the simulation: Integer. Should always be set.</span></span>
<span><span class="co"># To set desired precision:</span></span>
<span><span class="co"># - Set final number of R: final_R = 1000 (Default, can be omitted)</span></span>
<span><span class="co"># - Set final number of replications: final_nrep = 400 (Default, can be omitted)</span></span>
<span></span>
<span><span class="va">n_power_region</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/x_from_power.html">n_region_from_power</a></span><span class="op">(</span><span class="va">out</span>,</span>
<span>                                      seed <span class="op">=</span> <span class="fl">1357</span><span class="op">)</span></span>
<span><span class="va">n_power_region</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">n_power_region</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">n_power_region</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="final-remarks">Final Remarks<a class="anchor" aria-label="anchor" href="#final-remarks"></a>
</h2>
<p>For other options of <code><a href="../reference/power4test.html">power4test()</a></code> and
<code><a href="../reference/x_from_power.html">n_region_from_power()</a></code>, please refer to their help pages, as
well as the <a href="https://sfcheung.github.io/power4mome/articles/power4mome.html">Get-Started
article</a> and this <a href="https://sfcheung.github.io/power4mome/articles/x_from_power_for_n.html">article</a>
for <code><a href="../reference/x_from_power.html">n_from_power()</a></code>, which is the function to find one of
the regions, called twice by <code><a href="../reference/x_from_power.html">n_region_from_power()</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shu Fai Cheung, Sing-Hang Cheung, Wendie Yang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
